!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="assets",n(n.s=7)}([function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("puppeteer")},function(e,t,n){var r=n(4);n(0).config();var o=process.env.MONGO_CONNECTION_STRING;r.connect(o,{useNewUrlParser:!0,useUnifiedTopology:!0}),e.exports={db:r.connection,mongoConnectionString:o}},function(e,t,n){var r=n(4),o=new(0,r.Schema)({username:String,followedBy:Number,following:Number,fullName:String,isPrivate:Boolean,isError:Boolean,totalMediaCount:Number,lastTwelvePhotos:[{instaAiCaption:String,commentsDisabled:Boolean,likedBy:Number,mediaCaption:[{text:String}],commentCount:Number,takenAtTimestamp:Number}]});e.exports=r.model("User",o)},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("@babel/polyfill")},function(e,t){e.exports=require("axios")},function(e,t,n){"use strict";n.r(t);n(5);var r=n(2),o=n(3),i=n.n(o);n(6);function a(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var u=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.goto("https://www.instagram.com/".concat(t,"/?__a=1"),{waitUntil:"networkidle2"});case 2:return e.prev=2,e.next=5,n.evaluate((function(e){return document.querySelector(e).innerText}),"body > pre");case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,{isError:!0};case 12:return e.abrupt("return",e.sent);case 13:if(o=JSON.parse(r),0!==Object.keys(o).length){e.next=16;break}return e.abrupt("return",{isError:!0});case 16:if(!(i=o.graphql.user).is_private){e.next=22;break}return a={bio:i.biography,followedBy:i.edge_followed_by.count,following:i.edge_follow.count,fullName:i.full_name,isPrivate:i.is_private,totalMediaCount:i.edge_owner_to_timeline_media.count},e.abrupt("return",a);case 22:return u={bio:i.biography,followedBy:i.edge_followed_by.count,following:i.edge_follow.count,fullName:i.full_name,isPrivate:i.is_private,is_verified:i.is_verified,totalMediaCount:i.edge_owner_to_timeline_media.count,lastTwelvePhotos:i.edge_owner_to_timeline_media.edges.map((function(e){return{instaAiCaption:e.node.accessibility_caption,commentsDisabled:e.node.comments_disabled,likedBy:e.node.edge_liked_by.count,mediaCaption:e.node.edge_media_to_caption.edges.map((function(e){return{text:e.node.text}})),commentCount:e.node.edge_media_to_comment.count,takenAtTimestamp:e.node.taken_at_timestamp}}))},e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),c=n(0),s=n.n(c),l=n(1),d=n.n(l);function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var p=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.launch({headless:!1,executablePath:"/Users/berkelmas/nodeProjects/instagramBot/node_modules/puppeteer/.local-chromium/mac-756035/chrome-mac/Chromium.app/Contents/MacOS/Chromium"});case 2:return t=e.sent,e.next=5,t.newPage();case 5:return n=e.sent,e.next=8,n.setViewport({width:1600,height:770,deviceScaleFactor:1});case 8:return e.abrupt("return",{page:n,browser:t});case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();function m(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}n(0).config();var v=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.goto("https://www.instagram.com",{waitUntil:"networkidle2"});case 2:return e.next=4,t.waitForSelector("div:nth-child(2) > div:nth-child(1) > label:nth-child(1) > input:nth-child(2)");case 4:return e.next=6,t.focus("div:nth-child(2) > div:nth-child(1) > label:nth-child(1) > input:nth-child(2)");case 6:return e.next=8,t.keyboard.type(process.env.INSTA_USERNAME);case 8:return e.next=10,t.focus("div:nth-child(3) > div:nth-child(1) > label:nth-child(1) > input:nth-child(2)");case 10:return e.next=12,t.keyboard.type(process.env.INSTA_PASSWORD);case 12:return e.next=14,t.click("button[type='submit']");case 14:return e.next=16,t.waitForNavigation({waitUntil:"networkidle2"});case 16:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,u,"next",e)}function u(e){m(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();function h(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,u,"next",e)}function u(e){h(i,r,o,a,u,"throw",e)}a(void 0)}))}}s.a.config(),r.db.once("open",b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=b(regeneratorRuntime.mark((function e(){var t,n,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,n=t.page,t.browser,e.next=7,v(n);case 7:return e.next=10,i.a.findOne({$and:[{isPrivate:{$exists:!1}},{isError:{$exists:!1}}]}).lean();case 10:return r=e.sent,e.next=13,u(r.username,n);case 13:for(o=e.sent,a=Object.keys(o),c=0;c<a.length;c++)r[a[c]]=o[a[c]];return e.next=18,i.a.updateOne({_id:r._id},r);case 18:return e.next=20,n.waitFor(3e3);case 20:e.next=7;break;case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,t();case 3:r.db.close(),process.exit();case 5:case"end":return e.stop()}}),e)}))))}]);
//# sourceMappingURL=bundle.server.js.map